

# Калибровка таймингов анимаций тримапа

Тонкая настройка для устранения ощущения "затянутости" при zoom-out и переходах команда-инициатива.

## Проблема

1. Zoom-out (navigate-up) на 900мс ощущается долгим, особенно при выходе от инициатив
2. Exit-анимация (400мс) слишком долгая относительно zoom-out -- элементы "висят" после исчезновения
3. renderDepth delay (650мс) не синхронизирован с navigate-up (900мс), из-за чего дочерние элементы пропадают раньше, чем завершается zoom-out

## Изменения

### 1. `src/components/treemap/types.ts` -- скорректировать navigate-up

```
drilldown: 1400  (без изменений)
navigate-up: 800  (было 900 -- быстрее на 11%)
filter: 750  (без изменений)
```

Zoom-out быстрее zoom-in -- это стандартная UX-практика: пользователь уже знает контекст, куда возвращается.

### 2. `src/components/treemap/TreemapNode.tsx` -- ускорить exit

Exit transition duration: `0.4` -> `0.35` (350мс). Элементы должны исчезнуть до завершения zoom-out, а не одновременно.

### 3. `src/components/treemap/TreemapContainer.tsx` -- синхронизировать renderDepth delay

renderDepth delay при уменьшении глубины: `650` -> `900`. Сейчас дочерние элементы удаляются из DOM на 250мс раньше, чем завершается zoom-out, что создает "рваность". Значение 900мс = navigate-up (800) + небольшой буфер.

## Итоговые тайминги

| Параметр | Было | Станет |
|---|---|---|
| drilldown (zoom-in) | 1400ms | 1400ms |
| navigate-up (zoom-out) | 900ms | **800ms** |
| filter | 750ms | 750ms |
| exit (исчезновение) | 400ms | **350ms** |
| renderDepth delay | 650ms | **900ms** |
| isAnimatingRef guard | 1450ms | 1450ms |

