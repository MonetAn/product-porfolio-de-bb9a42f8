
# План: Инлайн-индикатор незаполненных полей

## Текущая проблема
- Тултип по карандашу сложно поймать и он может перекрываться другими элементами
- Пользователь не видит сразу, что именно не заполнено

## Решение
Заменить тултип на **инлайн-текст** рядом с карандашом, который сразу показывает недостающие поля.

## Визуальный результат

```text
┌──────┬────────┬─────────┬───────────────┬───────────────────────────────┐
│  ✎  │ Unit   │ Team    │ Initiative    │ ...остальные колонки...       │
├──────┼────────┼─────────┼───────────────┼───────────────────────────────┤
│  ✎  │ Core   │ Alpha   │ New Feature   │ ...                           │  ← всё заполнено
│  ✎ ⚠ Тип, Описание     │ Project X     │ ...                           │  ← не заполнено
│  ✎ ⚠ 3 поля │ Beta    │ Experiment    │ ...                           │  ← много полей
└──────┴────────┴─────────┴───────────────┴───────────────────────────────┘
```

## Что будет изменено

### 1. Колонка с карандашом расширяется
- Минимальная ширина увеличивается с 32px до 140px
- Это даёт место для текста "⚠ Тип, Описание"

### 2. Логика отображения
- Если всё заполнено: только карандаш
- Если 1-2 поля пусты: `✎ ⚠ Тип, Описание` (перечисление)
- Если 3 поля пусты: `✎ ⚠ 3 поля` (счётчик для экономии места)

### 3. Стилизация
- Иконка `AlertTriangle` (⚠) янтарного цвета
- Текст мелкий (text-xs), янтарного цвета
- Весь блок остаётся кликабельным для открытия карточки

### 4. Убираем
- Тултип с карандаша (больше не нужен)
- Янтарную точку над карандашом

### 5. Оставляем
- Подсветку строки `bg-amber-50/50` для незаполненных инициатив
- Легенду в тулбаре "Требуется заполнить (N)"
- Тултипы на кварталах (они работают хорошо)

---

## Техническая реализация

### Файл: `src/components/admin/InitiativeTable.tsx`

1. Изменить ширину первой колонки с 32px на 140px
2. Заменить содержимое ячейки с карандашом:

```tsx
<TableCell onClick={() => handleRowClick(row)}>
  <div className="flex items-center gap-1.5">
    <Pencil size={14} className="text-muted-foreground group-hover:text-primary" />
    {initiativeIncomplete && (
      <div className="flex items-center gap-1 text-amber-600">
        <AlertTriangle size={12} />
        <span className="text-xs">
          {missingFields.length <= 2 
            ? missingFields.join(', ')
            : `${missingFields.length} поля`
          }
        </span>
      </div>
    )}
  </div>
</TableCell>
```

3. Сокращённые названия полей для компактности:
   - "Тип инициативы" → "Тип"
   - "Стейкхолдеры" → "Стейкх."
   - "Описание" → "Описание"

4. Удалить `TooltipProvider`, `Tooltip`, `TooltipTrigger`, `TooltipContent` из ячейки карандаша

5. Добавить импорт `AlertTriangle` из lucide-react

### Корректировка sticky-позиций
Так как первая колонка станет шире, нужно обновить `left` для sticky-колонок:
- Unit: `left-[140px]` вместо `left-[32px]`
- Team: `left-[230px]` вместо `left-[122px]`  
- Initiative: `left-[330px]` вместо `left-[222px]`

---

## Преимущества решения
- Информация видна сразу без hover
- Пользователь точно знает, что не заполнено
- Нет проблем с z-index и перекрытием
- Очевидный призыв к действию
