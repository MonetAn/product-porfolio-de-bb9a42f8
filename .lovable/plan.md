

# –ü–ª–∞–Ω: –ö–≤–∞—Ä—Ç–∞–ª—å–Ω—ã–µ —Å–æ—Å—Ç–∞–≤—ã –∫–æ–º–∞–Ω–¥ –∏ –ø—Ä–æ—Ç—è–≥–∏–≤–∞–Ω–∏–µ –ª—é–¥–µ–π

## –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- [x] **–ú–∏–≥—Ä–∞—Ü–∏—è –ë–î** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã `team_quarter_snapshots`
- [x] **Hook `useTeamSnapshots`** ‚Äî CRUD –¥–ª—è —Å–Ω–∏–º–∫–æ–≤ + getEffectiveTeamMembers helper
- [x] **`QuarterSelector`** ‚Äî UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ã–±–æ—Ä–∞ –∫–≤–∞—Ä—Ç–∞–ª–∞ —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏
- [x] **`CSVPeopleImportDialog`** ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω –≤—ã–±–æ—Ä –∫–≤–∞—Ä—Ç–∞–ª–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ
- [x] **`AdminPeople`** ‚Äî –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–∞ –ø–æ –∫–≤–∞—Ä—Ç–∞–ª–∞–º
- [ ] **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –ø—Ä–æ—Ç—è–≥–∏–≤–∞–Ω–∏—è

---

## –°—É—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

–°–µ–π—á–∞—Å –ª—é–¥–∏ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –∫–æ–º–∞–Ω–¥–∞–º "–Ω–∞–≤—Å–µ–≥–¥–∞". –ù—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã —Å–æ—Å—Ç–∞–≤ –∫–æ–º–∞–Ω–¥—ã –º–æ–≥ –º–µ–Ω—è—Ç—å—Å—è –æ—Ç –∫–≤–∞—Ä—Ç–∞–ª–∞ –∫ –∫–≤–∞—Ä—Ç–∞–ª—É, —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º "–ø—Ä–æ—Ç—è–≥–∏–≤–∞–Ω–∏–µ–º" –≤–ø–µ—Ä—ë–¥.

```text
                    Q1'25        Q2'25        Q3'25        Q4'25
                   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–ó–∞–≥—Ä—É–∂–µ–Ω CSV:      [‚úì —Å–Ω–∏–º–æ–∫]                [‚úì —Å–Ω–∏–º–æ–∫]         
                   
–°–æ—Å—Ç–∞–≤:            –ò–≤–∞–Ω–æ–≤       –ò–≤–∞–Ω–æ–≤       –ò–≤–∞–Ω–æ–≤       –ò–≤–∞–Ω–æ–≤     (–ø—Ä–æ—Ç—è–Ω—É—Ç ‚Üí)
                   –ü–µ—Ç—Ä–æ–≤       –ü–µ—Ç—Ä–æ–≤       (—É–≤–æ–ª–µ–Ω)     
                                             –°–∏–¥–æ—Ä–æ–≤      –°–∏–¥–æ—Ä–æ–≤    (–ø—Ä–∏—à—ë–ª)
                                             
–û—Ç–∫—É–¥–∞ —Å–æ—Å—Ç–∞–≤:     –∏–∑ CSV Q1    –ø—Ä–æ—Ç—è–Ω—É—Ç     –∏–∑ CSV Q3    –ø—Ä–æ—Ç—è–Ω—É—Ç
```

---

## –ù–æ–≤–∞—è –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

### –ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞: `team_quarter_snapshots`

–•—Ä–∞–Ω–∏—Ç "—Å–Ω–∏–º–∫–∏" —Å–æ—Å—Ç–∞–≤–∞ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–≤–∞—Ä—Ç–∞–ª:

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| id | uuid | PK |
| unit | text | Unit –∫–æ–º–∞–Ω–¥—ã |
| team | text | –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã |
| quarter | text | "2025-Q1" |
| person_ids | uuid[] | –°–ø–∏—Å–æ–∫ ID –ª—é–¥–µ–π –≤ –∫–æ–º–∞–Ω–¥–µ |
| source | text | "csv_import" / "carried_forward" |
| imported_at | timestamp | –ö–æ–≥–¥–∞ –∑–∞–≥—Ä—É–∂–µ–Ω |
| created_by | uuid | –ö—Ç–æ –∑–∞–≥—Ä—É–∑–∏–ª |

### –õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Å—Ç–∞–≤–∞

```text
getTeamMembersForQuarter(unit, team, quarter):
  
  1. –ò—â–µ–º —Å–Ω–∏–º–æ–∫ –¥–ª—è —ç—Ç–æ–≥–æ –∫–≤–∞—Ä—Ç–∞–ª–∞
     ‚Üí –µ—Å–ª–∏ –µ—Å—Ç—å: –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ª—é–¥–µ–π –∏–∑ —Å–Ω–∏–º–∫–∞
  
  2. –ï—Å–ª–∏ –Ω–µ—Ç —Å–Ω–∏–º–∫–∞:
     a) –ö–≤–∞—Ä—Ç–∞–ª ‚â§ —Ç–µ–∫—É—â–∏–π: –∏—â–µ–º –±–ª–∏–∂–∞–π—à–∏–π –ü–†–û–®–õ–´–ô —Å–Ω–∏–º–æ–∫
     b) –ö–≤–∞—Ä—Ç–∞–ª > —Ç–µ–∫—É—â–∏–π: –±–µ—Ä—ë–º –¢–ï–ö–£–©–ò–ô —Å–æ—Å—Ç–∞–≤ (hired + –Ω–µ terminated)
     
  3. –ï—Å–ª–∏ –≤–æ–æ–±—â–µ –Ω–µ—Ç —Å–Ω–∏–º–∫–æ–≤: –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ–∫—É—â–∏–π —Å–æ—Å—Ç–∞–≤
```

---

## –ò–∑–º–µ–Ω–µ–Ω–∏—è UI

### 1. –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–õ—é–¥–∏" ‚Äî –¥–æ–±–∞–≤–ª—è–µ–º —Ñ–∏–ª—å—Ç—Ä –ø–æ –∫–≤–∞—Ä—Ç–∞–ª—É

```text
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚Üê –ê–¥–º–∏–Ω–∫–∞    [üë• –õ—é–¥–∏]    12 —á–µ–ª. ‚Ä¢ 5 –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤                ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Unit: [B2B Pizza ‚ñº]   Team: [Kitchen ‚ñº]                         ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ –ö–≤–∞—Ä—Ç–∞–ª: [‚óè 25 Q1] [25 Q2] [25 Q3] [25 Q4] [–í—Å–µ]    ‚Üê –ù–û–í–û–ï    ‚îÇ
‚îÇ          ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                                               ‚îÇ
‚îÇ          "—Å–Ω–∏–º–æ–∫ –∑–∞–≥—Ä—É–∂–µ–Ω 15.01.2025"                           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ [–ü–æ –ª—é–¥—è–º] [–ü–æ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞–º]        25 Q1  25 Q2  25 Q3  25 Q4  ‚îÇ
‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÇ
‚îÇ ‚ñº –ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω                       35%    35%    ‚Äî      ‚Äî     ‚îÇ
‚îÇ   ‚îî‚îÄ –ò–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞ X                   35%    35%    ‚Äî      ‚Äî     ‚îÇ
‚îÇ ‚ñº –ü–µ—Ç—Ä–æ–≤ –ü—ë—Ç—Ä                       25%    ‚Äî      ‚Äî      ‚Äî     ‚îÇ
‚îÇ   ‚îî‚îÄ (–ø–æ–∫–∞–∑–∞–Ω —Ç–æ–ª—å–∫–æ –≤ Q1, —Ç.–∫. —É–≤–æ–ª–µ–Ω)                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ü—Ä–∏ –≤—ã–±–æ—Ä–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–≤–∞—Ä—Ç–∞–ª–∞:**
- –¢–∞–±–ª–∏—Ü–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∫–æ–ª–æ–Ω–∫—É —ç—Ç–æ–≥–æ –∫–≤–∞—Ä—Ç–∞–ª–∞ (—É–ø—Ä–æ—â—ë–Ω–Ω—ã–π –≤–∏–¥)
- –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ª—é–¥–∏, –∞–∫—Ç–∏–≤–Ω—ã–µ –≤ —ç—Ç–æ–º –∫–≤–∞—Ä—Ç–∞–ª–µ
- –í–∏–¥–µ–Ω —Å—Ç–∞—Ç—É—Å: "–°–Ω–∏–º–æ–∫ –∑–∞–≥—Ä—É–∂–µ–Ω" / "–ü—Ä–æ—Ç—è–Ω—É—Ç–æ –∏–∑ Q2" / "–¢–µ–∫—É—â–∏–π —Å–æ—Å—Ç–∞–≤"

**–ü—Ä–∏ –≤—ã–±–æ—Ä–µ "–í—Å–µ":**
- –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤—Å–µ –∫–≤–∞—Ä—Ç–∞–ª—ã (–∫–∞–∫ —Å–µ–π—á–∞—Å)
- –õ—é–¥–∏ –≤–∏–¥–Ω—ã –≤ –∫–æ–ª–æ–Ω–∫–∞—Ö –∫–≤–∞—Ä—Ç–∞–ª–æ–≤, –≥–¥–µ –æ–Ω–∏ –∞–∫—Ç–∏–≤–Ω—ã
- –ü—É—Å—Ç—ã–µ —è—á–µ–π–∫–∏ –¥–ª—è –∫–≤–∞—Ä—Ç–∞–ª–æ–≤, –≥–¥–µ —á–µ–ª–æ–≤–µ–∫–∞ –Ω–µ—Ç –≤ –∫–æ–º–∞–Ω–¥–µ

### 2. –ò–º–ø–æ—Ä—Ç CSV ‚Äî –≤—ã–±–æ—Ä –∫–≤–∞—Ä—Ç–∞–ª–∞

```text
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ò–º–ø–æ—Ä—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∏–∑ CSV                                       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                 ‚îÇ
‚îÇ –ö–≤–∞—Ä—Ç–∞–ª –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞:   [2025-Q1 ‚ñº]   ‚Üê –ù–û–í–´–ô –°–ï–õ–ï–ö–¢             ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ ‚îÇ                                                          ‚îÇ     ‚îÇ
‚îÇ ‚îÇ        üìÅ –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ CSV-—Ñ–∞–π–ª —Å—é–¥–∞                       ‚îÇ     ‚îÇ
‚îÇ ‚îÇ           –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞                         ‚îÇ     ‚îÇ
‚îÇ ‚îÇ                                                          ‚îÇ     ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ ‚ìò –≠—Ç–æ—Ç —Å–Ω–∏–º–æ–∫ –∑–∞–º–µ–Ω–∏—Ç —Å–æ—Å—Ç–∞–≤ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∫–≤–∞—Ä—Ç–∞–ª–∞   ‚îÇ
‚îÇ   –ü—Ä–µ–¥—ã–¥—É—â–∏–µ –∏ –±—É–¥—É—â–∏–µ –∫–≤–∞—Ä—Ç–∞–ª—ã –Ω–µ –±—É–¥—É—Ç –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã             ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                            [–û—Ç–º–µ–Ω–∞] [–î–∞–ª–µ–µ ‚Üí]   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 3. –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Å–æ—Å—Ç–∞–≤–∞

–í —Ö–µ–¥–µ—Ä–µ –∫–≤–∞—Ä—Ç–∞–ª–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ç—É—Å:

```text
25 Q1           25 Q2           25 Q3           25 Q4
[üì• –°–Ω–∏–º–æ–∫]     [‚Üí –∏–∑ Q1]       [üì• –°–Ω–∏–º–æ–∫]     [üë• –¢–µ–∫—É—â–∏–µ]
   ‚Üì               ‚Üì               ‚Üì               ‚Üì
–∑–∞–≥—Ä—É–∂–µ–Ω CSV   –ø—Ä–æ—Ç—è–Ω—É—Ç        –∑–∞–≥—Ä—É–∂–µ–Ω CSV    —Ç–µ–∫—É—â–∏–π —Å–æ—Å—Ç–∞–≤
15.01.2025     –∏–∑ Q1           01.10.2025      (–±—É–¥—É—â–∏–π)
```

---

## –§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö ‚Äî –Ω–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è

```sql
CREATE TABLE team_quarter_snapshots (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  unit text NOT NULL,
  team text NOT NULL,
  quarter text NOT NULL,
  person_ids uuid[] NOT NULL DEFAULT '{}',
  source text NOT NULL DEFAULT 'csv_import',
  imported_at timestamptz DEFAULT now(),
  created_by uuid REFERENCES auth.users(id),
  
  UNIQUE(unit, team, quarter)
);

-- RLS
ALTER TABLE team_quarter_snapshots ENABLE ROW LEVEL SECURITY;
-- ... policies for dodo employees
```

### 2. –ù–æ–≤—ã–π hook: `useTeamSnapshots.ts`

- `useTeamSnapshots(unit, team)` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö —Å–Ω–∏–º–∫–æ–≤ –∫–æ–º–∞–Ω–¥—ã
- `useCreateSnapshot()` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Å–Ω–∏–º–∫–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ
- `getEffectiveTeamMembers(unit, team, quarter, snapshots, people)` ‚Äî –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–∞–≤–∞

### 3. `CSVPeopleImportDialog.tsx`

- –î–æ–±–∞–≤–∏—Ç—å Select –¥–ª—è –≤—ã–±–æ—Ä–∞ –∫–≤–∞—Ä—Ç–∞–ª–∞
- –ü—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ:
  1. Upsert –ª—é–¥–µ–π –≤ —Ç–∞–±–ª–∏—Ü—É `people`
  2. –°–æ–∑–¥–∞—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å —Å–Ω–∏–º–æ–∫ –≤ `team_quarter_snapshots`

### 4. `AdminPeople.tsx`

- –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ `selectedQuarter: string | 'all'`
- –î–æ–±–∞–≤–∏—Ç—å QuarterFilter –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- –ò–∑–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é `filteredPeople` —Å —É—á—ë—Ç–æ–º —Å–Ω–∏–º–∫–æ–≤

### 5. `PeopleAssignmentsTable.tsx`

- –ü—Ä–∏–Ω–∏–º–∞—Ç—å `selectedQuarter` prop
- –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–≤–∞—Ä—Ç–∞–ª ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ–¥–Ω—É –∫–æ–ª–æ–Ω–∫—É
- –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ª—é–¥–µ–π —á–µ—Ä–µ–∑ `getEffectiveTeamMembers()`

### 6. –ù–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç: `QuarterSelector.tsx`

Toggle-–≥—Ä—É–ø–ø–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞ –∫–≤–∞—Ä—Ç–∞–ª–∞ —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏ —Å—Ç–∞—Ç—É—Å–∞ (—Å–Ω–∏–º–æ–∫/–ø—Ä–æ—Ç—è–Ω—É—Ç–æ/—Ç–µ–∫—É—â–∏–µ)

---

## –õ–æ–≥–∏–∫–∞ –ø—Ä–æ—Ç—è–≥–∏–≤–∞–Ω–∏—è (–¥–µ—Ç–∞–ª–∏)

```typescript
function getEffectiveTeamMembers(
  unit: string,
  team: string,
  quarter: string,
  snapshots: TeamSnapshot[],
  allPeople: Person[],
  quarters: string[]
): Person[] {
  // 1. –ï—Å—Ç—å –ª–∏ —Å–Ω–∏–º–æ–∫ –¥–ª—è —ç—Ç–æ–≥–æ –∫–≤–∞—Ä—Ç–∞–ª–∞?
  const snapshot = snapshots.find(s => 
    s.unit === unit && s.team === team && s.quarter === quarter
  );
  
  if (snapshot) {
    return allPeople.filter(p => snapshot.person_ids.includes(p.id));
  }
  
  // 2. –ù–µ—Ç —Å–Ω–∏–º–∫–∞ ‚Äî –æ–ø—Ä–µ–¥–µ–ª—è–µ–º –æ—Ç–∫—É–¥–∞ –±—Ä–∞—Ç—å
  const currentQuarter = getCurrentQuarter(); // "2025-Q4"
  const quarterIndex = quarters.indexOf(quarter);
  const currentIndex = quarters.indexOf(currentQuarter);
  
  if (quarterIndex <= currentIndex) {
    // –ü—Ä–æ—à–ª—ã–π/—Ç–µ–∫—É—â–∏–π –∫–≤–∞—Ä—Ç–∞–ª –±–µ–∑ —Å–Ω–∏–º–∫–∞ ‚Üí –∏—â–µ–º –±–ª–∏–∂–∞–π—à–∏–π –ø—Ä–æ—à–ª—ã–π —Å–Ω–∏–º–æ–∫
    for (let i = quarterIndex - 1; i >= 0; i--) {
      const prevSnapshot = snapshots.find(s => 
        s.unit === unit && s.team === team && s.quarter === quarters[i]
      );
      if (prevSnapshot) {
        return allPeople.filter(p => prevSnapshot.person_ids.includes(p.id));
      }
    }
  }
  
  // 3. –ë—É–¥—É—â–∏–π –∫–≤–∞—Ä—Ç–∞–ª –∏–ª–∏ –Ω–µ—Ç –ø—Ä–æ—à–ª—ã—Ö —Å–Ω–∏–º–∫–æ–≤ ‚Üí —Ç–µ–∫—É—â–∏–π –∞–∫—Ç–∏–≤–Ω—ã–π —Å–æ—Å—Ç–∞–≤
  return allPeople.filter(p => 
    p.unit === unit && 
    p.team === team && 
    !p.terminated_at
  );
}
```

---

## –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞**
1. –ó–∞—Ö–æ–∂—É –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É "–õ—é–¥–∏"
2. –í–∏–∂—É —Ç–µ–∫—É—â–∏–π —Å–æ—Å—Ç–∞–≤ (–∏–∑ —Ç–∞–±–ª–∏—Ü—ã people, –±–µ–∑ —Å–Ω–∏–º–∫–æ–≤)
3. –ü—Ä–æ—Å—Ç–∞–≤–ª—è—é –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã ‚Äî –æ–Ω–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ —ç—Ç–æ–º—É —Å–æ—Å—Ç–∞–≤—É

**–°—Ü–µ–Ω–∞—Ä–∏–π 2: –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–≥–æ —Å–Ω–∏–º–∫–∞**
1. –í—ã–±–∏—Ä–∞—é –∫–≤–∞—Ä—Ç–∞–ª Q1 –≤ —Ñ–∏–ª—å—Ç—Ä–µ
2. –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é CSV –¥–ª—è Q1
3. –í–∏–∂—É —Å–æ—Å—Ç–∞–≤ Q1 —Å –º–µ—Ç–∫–æ–π "–°–Ω–∏–º–æ–∫ –∑–∞–≥—Ä—É–∂–µ–Ω"
4. Q2, Q3, Q4 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ "–ø—Ä–æ—Ç—è–≥–∏–≤–∞—é—Ç" —ç—Ç–æ—Ç —Å–æ—Å—Ç–∞–≤

**–°—Ü–µ–Ω–∞—Ä–∏–π 3: –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–∞–≤–∞ –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ –≥–æ–¥–∞**
1. –ö–≤–∞—Ä—Ç–∞–ª Q3, –∫—Ç–æ-—Ç–æ —É–≤–æ–ª–∏–ª—Å—è, –ø—Ä–∏—à—ë–ª –Ω–æ–≤—ã–π
2. –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é CSV –¥–ª—è Q3
3. Q3 –∏ Q4 –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –Ω–æ–≤—ã–π —Å–æ—Å—Ç–∞–≤
4. Q1 –∏ Q2 –æ—Å—Ç–∞—é—Ç—Å—è —Å–æ —Å—Ç–∞—Ä—ã–º —Å–æ—Å—Ç–∞–≤–æ–º

**–°—Ü–µ–Ω–∞—Ä–∏–π 4: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –±—É–¥—É—â–µ–µ**
1. –°–µ–π—á–∞—Å Q4'25, –ø–ª–∞–Ω–∏—Ä—É—é Q1'26
2. –í–∏–∂—É —Ç–µ–∫—É—â–∏–π —Å–æ—Å—Ç–∞–≤, –ø—Ä–æ—Ç—è–Ω—É—Ç—ã–π –≤ Q1'26
3. –ü—Ä–æ—Å—Ç–∞–≤–ª—è—é –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã
4. –ö–æ–≥–¥–∞ –Ω–∞—Å—Ç—É–ø–∏—Ç Q1'26 ‚Äî —Å–º–æ–≥—É –∑–∞–≥—Ä—É–∑–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Å–Ω–∏–º–æ–∫

---

## –ü–æ—Ä—è–¥–æ–∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–ú–∏–≥—Ä–∞—Ü–∏—è –ë–î** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã `team_quarter_snapshots`
2. **Hook `useTeamSnapshots`** ‚Äî CRUD –¥–ª—è —Å–Ω–∏–º–∫–æ–≤
3. **Helper `getEffectiveTeamMembers`** ‚Äî –ª–æ–≥–∏–∫–∞ –ø—Ä–æ—Ç—è–≥–∏–≤–∞–Ω–∏—è
4. **`QuarterSelector`** ‚Äî UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ã–±–æ—Ä–∞ –∫–≤–∞—Ä—Ç–∞–ª–∞
5. **`CSVPeopleImportDialog`** ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –≤—ã–±–æ—Ä –∫–≤–∞—Ä—Ç–∞–ª–∞
6. **`AdminPeople`** ‚Äî –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–∞
7. **`PeopleAssignmentsTable`** ‚Äî –∞–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –∫–≤–∞—Ä—Ç–∞–ª

