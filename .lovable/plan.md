
# План: Улучшение UX админки и дашборда

## Текущее состояние

```text
Дашборд (Index.tsx):
┌─────────────────────────────────────────────────────────────────────┐
│ [P] Product Portfolio   Budget  Stakeholders  Timeline              │
│                                    [🔍] [📤 Upload] [⌨️] [⚙️ Упр.]  │
└─────────────────────────────────────────────────────────────────────┘
                                          ↑ Upload CSV (только фронт!)
                                                      ↑ Шестерёнка

Админка Инициативы (Admin.tsx → AdminHeader):
┌─────────────────────────────────────────────────────────────────────┐
│ [← Дашборд] [A] Админка  │ 25 иниц. │  [Импорт CSV] [Экспорт CSV ▼] │
└─────────────────────────────────────────────────────────────────────┘
                                          ↑ Отдельные кнопки

ScopeSelector (фильтры Unit/Team):
┌─────────────────────────────────────────────────────────────────────┐
│ [Выберите юнит ▼]  [Все команды ▼]  ← disabled пока нет юнита      │
└─────────────────────────────────────────────────────────────────────┘

Админка Люди (AdminPeople.tsx):
┌─────────────────────────────────────────────────────────────────────┐
│ [← Админка]  [👥] Люди  │  [Импорт] [Экспорт] [⚙️ SettingsMenu]    │
└─────────────────────────────────────────────────────────────────────┘
                                                     ↑ Уже есть!
```

---

## Целевое состояние

```text
Дашборд (Index.tsx):
┌─────────────────────────────────────────────────────────────────────┐
│ [P] Product Portfolio   Budget  Stakeholders  Timeline              │
│                                    [🔍] [⌨️] [📋 Управление]        │
└─────────────────────────────────────────────────────────────────────┘
                                       ↑ Upload убран (есть drag-drop)
                                            ↑ Новый значок (не шестерёнка)

ScopeSelector (фильтры Unit/Team):
┌─────────────────────────────────────────────────────────────────────┐
│ [Выберите юнит ▼]  [Все команды ▼]  ← Team ВСЕГДА активен          │
└─────────────────────────────────────────────────────────────────────┘

Админка Инициативы + Люди:
┌─────────────────────────────────────────────────────────────────────┐
│ [← Дашборд] [A] Админка  │ 25 иниц. │  [Импорт CSV]  [⚙️]           │
│                                                       ↑ Settings     │
│                                          (Экспорт внутри ⚙️)         │
└─────────────────────────────────────────────────────────────────────┘
```

---

## 1. Team-селектор всегда активен

**Проблема:** Сейчас нельзя выбрать команду без выбора юнита
**Решение:** Убрать `disabled={selectedUnits.length === 0}` и показывать ВСЕ команды, если юнит не выбран

**Файл:** `src/components/admin/ScopeSelector.tsx`

Изменения:
- Убрать `disabled` с кнопки Team
- Передавать все команды из всех юнитов, если `selectedUnits.length === 0`

---

## 2. Шестерёнка-меню в AdminHeader (страница инициатив)

**Текущее:** Отдельные кнопки "Импорт CSV" и "Экспорт CSV"
**Цель:** Перенести "Экспорт CSV" в SettingsMenu (⚙️), оставить "Импорт CSV" как отдельную кнопку

**Файлы:**
- `src/components/admin/AdminHeader.tsx` — добавить SettingsMenu, убрать dropdown экспорта
- Создать `src/components/admin/AdminSettingsMenu.tsx` — новый компонент с экспортом

Структура меню:
```
⚙️ Settings Menu
├── 📥 Экспорт: Все инициативы (25)
├── 📥 Экспорт: Отфильтрованные (12)  ← если есть фильтры
└── ─────────────────
    (можно добавить другие настройки позже)
```

---

## 3. Замена значка "Управление" на дашборде

**Текущее:** `<Settings size={16} />` (шестерёнка)
**Проблема:** Шестерёнка теперь = настройки внутри админки

**Варианты замены:**
| Иконка | Название | Смысл |
|--------|----------|-------|
| `LayoutDashboard` | Dashboard | Панель управления |
| `PanelLeft` | Panel | Боковая панель |
| `Sliders` | Sliders | Ползунки настроек |
| `ClipboardEdit` | ClipboardEdit | Редактирование списка |
| `Pencil` | Pencil | Редактирование |

**Рекомендация:** `Sliders` или `PanelLeft`
- `Sliders` — передаёт идею "управления параметрами"
- `PanelLeft` — открытие панели управления

**Файл:** `src/components/Header.tsx`

---

## 4. Убрать кнопку Upload CSV с дашборда

**Текущее:** Кнопка Upload в хедере + drag-drop
**Проблема:** CSV загружается только во фронт (не сохраняется в базу)
**Решение:** Убрать кнопку, оставить drag-drop как "скрытую фичу"

**Файл:** `src/components/Header.tsx`

Изменения:
- Убрать `onUploadClick` из props
- Убрать кнопку Upload из JSX
- Оставить drag-drop в Index.tsx как fallback для продвинутых пользователей

**Примечание:** Drag-drop CSV загружает данные только во фронт и НЕ сохраняет в базу. При обновлении страницы данные исчезнут. Это legacy-режим для быстрого просмотра.

---

## Порядок изменений файлов

1. `src/components/admin/ScopeSelector.tsx` — Team всегда активен
2. Создать `src/components/admin/AdminSettingsMenu.tsx` — меню с экспортом
3. `src/components/admin/AdminHeader.tsx` — заменить Export dropdown на SettingsMenu
4. `src/components/Header.tsx`:
   - Заменить Settings на Sliders (или другую иконку по выбору)
   - Убрать кнопку Upload CSV и `onUploadClick` из props
5. `src/pages/Index.tsx` — убрать `onUploadClick` из вызова Header

---

## Визуальный результат

**Дашборд:**
```
[P] Product Portfolio   Budget  Stakeholders  Timeline
                              [🔍 Поиск] [⌨️] [🎛️ Управление]
```

**Админка инициатив:**
```
[← Дашборд] [A] Админка  25 иниц.  [📤 Импорт CSV]  [⚙️]
                                                     └─ Экспорт: Все
                                                        Экспорт: Фильтр.
```

**Фильтры:**
```
[DTIP ▼]  [Core Team ▼]    ← оба активны, можно выбрать Team без Unit
```
